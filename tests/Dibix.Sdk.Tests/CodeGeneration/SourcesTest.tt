<#@ template debug="false" hostspecific="true" language="C#" #>
<#@ output extension=".cs" #>
<#@ assembly name="$(SolutionDir)\src\Dibix.Sdk\bin\Debug\net46\Dibix.Sdk.dll" #>
<#@ assembly name="$(SolutionDir)\src\Dibix.Sdk\bin\Debug\net46\Microsoft.SqlServer.TransactSql.ScriptDom.dll" #>
<#@ import namespace="Dibix.Sdk.CodeGeneration" #><#

string output = SqlAccessorGenerator.FromVisualStudio(this.Host, (IServiceProvider)this.Host)
                                    .AddSource("Dibix.Sdk.Tests.Database", x => 
                                    {
										x.SelectFolder(null, "CodeAnalysis", "Tables", "Types", "Tests/Parser", "Tests/Sources/Excluded", "Tests/Sources/dbx_tests_sources_externalsp")
										 .SelectFile("Tests/Sources/Excluded/Nested/dbx_tests_sources_excludednested.sql")
										 .SelectParser<SqlStoredProcedureParser>(y => 
										 {
										     y.Formatter<TakeSourceSqlStatementFormatter>();
										 });
									})
                                    .AddSource("Dibix.Sdk.Tests.Database", x =>
                                    {
                                        x.SelectFile(@"Tests\Sources\dbx_tests_sources_externalsp.sql")
                                         .SelectParser<SqlStoredProcedureParser>(y =>
                                         {
                                             y.Formatter<ExecStoredProcedureSqlStatementFormatter>();
                                         });
                                    })
                                    .SelectOutputWriter<SqlDaoWriter>(x => 
									{
										x.Namespace("This.Is.A.Custom.Namespace")
                                         .ClassName("Accessor")
                                         .Formatting(SqlQueryOutputFormatting.Verbatim);
									})
                                    .Generate();
Write(output);

#>