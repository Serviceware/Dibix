<Project>

  <PropertyGroup>
    <DibixToolPath Condition="$(DibixToolPath) == ''">$(MSBuildThisFileDirectory)..\tools\net46\Dibix.MSBuild.dll</DibixToolPath>
  </PropertyGroup>

  <UsingTask TaskName="VerifyGeneratedCodeTask" AssemblyFile="$(DibixToolPath)" />

  <Target Name="VerifyGeneratedCodeBeforeBuild" BeforeTargets="PreBuildEvent">
    <VerifyGeneratedCodeTask ProjectDirectory="$(MSBuildProjectDirectory)"
                             Namespace="$(RootNamespace)"
                             AssemblyReferences="@(Reference->'%(HintPath)')"
                             Inputs="@(None)"
                             Condition="%(None.Generator) == 'Dibix'" />
  </Target>

</Project>